<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿßŸÑŸÉÿ±ŸäŸÖ - Sryoss AlYaqeen</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700;800&family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #0d4d2f;
            --secondary-green: #1a6b47;
            --light-green: #2d8a5e;
            --gold: #d4af37;
            --gold-light: #f4d03f;
            --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Cairo', 'Amiri', sans-serif;
            background: linear-gradient(180deg, var(--primary-green) 0%, var(--secondary-green) 50%, var(--light-green) 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 430px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        .header {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .back-button {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:active {
            transform: scale(0.95);
        }

        .back-button svg {
            width: 28px;
            height: 28px;
            fill: #fff;
        }

        .header-title {
            text-align: center;
            flex: 1;
        }

        .header-title .arabic {
            font-family: 'Amiri', serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--gold);
        }

        .header-placeholder {
            width: 40px;
        }

        .search-section {
            padding: 15px;
        }

        .search-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: var(--card-shadow);
        }

        .search-box input {
            flex: 1;
            border: none;
            outline: none;
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            background: transparent;
        }

        .search-icon {
            font-size: 20px;
        }

        .surah-list {
            padding: 0 15px;
        }

        .surah-item {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--card-shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .surah-item::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--gold) 0%, var(--gold-light) 100%);
        }

        .surah-item:active {
            transform: translateX(-5px);
        }

        .surah-number {
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            font-weight: 700;
            color: var(--gold);
            flex-shrink: 0;
        }

        .surah-info {
            flex: 1;
        }

        .surah-name {
            font-family: 'Amiri', serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 4px;
        }

        .surah-details {
            font-family: 'Cairo', sans-serif;
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 10px;
        }

        .reader-view {
            display: none;
        }

        .reader-view.active {
            display: block;
        }

        .surah-header {
            background: linear-gradient(145deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            margin: 15px;
            margin-top: 0;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }

        .surah-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold) 0%, var(--gold-light) 50%, var(--gold) 100%);
        }

        .surah-title-arabic {
            font-family: 'Amiri', serif;
            font-size: 28px;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 8px;
        }

        .surah-title-english {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.85);
        }

        .surah-bismillah {
            font-family: 'Amiri', serif;
            font-size: 22px;
            color: var(--gold-light);
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(212, 175, 55, 0.3);
        }

        .ayah-container {
            background: rgba(255, 255, 255, 0.95);
            margin: 15px;
            border-radius: 16px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            max-height: 60vh;
            overflow-y: auto;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 40px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            text-align: center;
            color: var(--gold);
            font-family: 'Cairo', sans-serif;
            font-size: 16px;
            margin-top: 20px;
        }

        .ayah {
            padding: 15px 0;
            border-bottom: 1px solid rgba(13, 77, 47, 0.1);
        }

        .ayah:last-child {
            border-bottom: none;
        }

        .ayah-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(145deg, var(--gold) 0%, var(--gold-light) 100%);
            border-radius: 8px;
            font-family: 'Cairo', sans-serif;
            font-size: 12px;
            font-weight: 700;
            color: var(--primary-green);
            margin-right: 8px;
            vertical-align: middle;
        }

        .ayah-text {
            font-family: 'Scheherazade New', 'Amiri', serif;
            font-size: var(--ayah-font-size, 28px);
            line-height: 2.4;
            color: var(--primary-green);
            text-align: right;
            direction: rtl;
            transition: font-size 0.2s ease;
        }

        /* Font Size Controls */
        .font-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            padding: 10px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            margin: 0 15px 15px;
            box-shadow: var(--card-shadow);
        }

        .font-btn {
            width: 40px;
            height: 40px;
            background: linear-gradient(145deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            border: none;
            border-radius: 10px;
            color: var(--gold);
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

        .font-btn:active {
            transform: scale(0.95);
        }

        .font-display {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            color: var(--primary-green);
            font-weight: 600;
            min-width: 80px;
            text-align: center;
        }

        /* Bookmark Indicator */
        .bookmark-indicator {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background: linear-gradient(145deg, var(--gold) 0%, var(--gold-light) 100%);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: var(--card-shadow);
            z-index: 99;
            cursor: pointer;
            font-size: 20px;
        }

        .bookmark-indicator.visible {
            display: flex;
        }

        .bookmark-indicator.saved {
            animation: bookmarkPulse 0.5s ease;
        }

        @keyframes bookmarkPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Last Read Badge */
        .last-read-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            background: linear-gradient(145deg, var(--gold) 0%, var(--gold-light) 100%);
            color: var(--primary-green);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            font-family: 'Cairo', sans-serif;
            margin-right: 8px;
        }

        .last-read-badge .icon {
            font-size: 12px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--secondary-green) 100%);
            padding: 12px 20px;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
        }

        .nav-item .icon {
            font-size: 24px;
        }

        .nav-item .label {
            font-family: 'Cairo', sans-serif;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.85);
        }

        .surah-list-view.hidden {
            display: none;
        }

        .scroll-top {
            position: fixed;
            bottom: 80px;
            left: 20px;
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, var(--gold) 0%, var(--gold-light) 100%);
            border: none;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--card-shadow);
            z-index: 99;
        }

        .scroll-top.visible {
            display: flex;
        }

        .scroll-top svg {
            width: 24px;
            height: 24px;
            fill: #fff;
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="back-button" onclick="goBack()">
                <svg viewBox="0 0 24 24">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                </svg>
            </div>
            <div class="header-title">
                <span class="arabic">ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿßŸÑŸÉÿ±ŸäŸÖ</span>
            </div>
            <div class="header-placeholder"></div>
        </header>

        <section class="search-section" id="searchSection">
            <div class="search-box">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿ≥Ÿàÿ±ÿ©..." oninput="filterSurahs()">
            </div>
        </section>

        <div class="surah-list-view" id="surahListView">
            <div class="surah-list" id="surahList"></div>
        </div>

        <div class="reader-view" id="readerView">
            <div class="surah-header">
                <div class="surah-title-arabic" id="readerSurahName">ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©</div>
                <div class="surah-title-english" id="readerSurahInfo">ÿ≥Ÿàÿ±ÿ© ŸÖŸÉŸäÿ© - 7 ÿ¢Ÿäÿßÿ™</div>
                <div class="surah-bismillah" id="bismillah">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
            </div>

            <!-- Font Size Controls -->
            <div class="font-controls">
                <button class="font-btn" onclick="decreaseFontSize()" aria-label="ÿ™ÿµÿ∫Ÿäÿ± ÿßŸÑÿÆÿ∑">A-</button>
                <div class="font-display" id="fontDisplay">ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑: 28</div>
                <button class="font-btn" onclick="increaseFontSize()" aria-label="ÿ™ŸÉÿ®Ÿäÿ± ÿßŸÑÿÆÿ∑">A+</button>
            </div>

            <div class="ayah-container" id="ayahContainer"></div>
        </div>

        <button class="scroll-top" id="scrollTopBtn" onclick="scrollToTop()">
            <svg viewBox="0 0 24 24">
                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
            </svg>
        </button>

        <!-- Bookmark Indicator -->
        <div class="bookmark-indicator" id="bookmarkIndicator" onclick="saveBookmark()" title="ÿ≠ŸÅÿ∏ ŸÖŸÉÿßŸÜ ÿßŸÑŸÇÿ±ÿßÿ°ÿ©">
            üîñ
        </div>
    </div>

    <nav class="bottom-nav" id="bottomNav">
        <div class="nav-item" onclick="showListView()">
            <span class="icon">üìñ</span>
            <span class="label">ÿßŸÑÿ≥Ÿàÿ±</span>
        </div>
        <div class="nav-item" onclick="goBack()">
            <span class="icon">üè†</span>
            <span class="label">ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</span>
        </div>
    </nav>

    <script>
        // ==================== Local Storage Keys ====================
        const STORAGE_KEYS = {
            LAST_READ_SURAH: 'quran_lastReadSurah',
            BOOKMARKS: 'quran_bookmarks',
            FONT_SIZE: 'quran_fontSize'
        };

        // ==================== Font Size Management ====================
        const MIN_FONT_SIZE = 18;
        const MAX_FONT_SIZE = 48;
        const DEFAULT_FONT_SIZE = 28;

        let currentFontSize = DEFAULT_FONT_SIZE;

        function loadFontSize() {
            const saved = localStorage.getItem(STORAGE_KEYS.FONT_SIZE);
            if (saved) {
                currentFontSize = parseInt(saved, 10);
                // Ensure it's within bounds
                currentFontSize = Math.max(MIN_FONT_SIZE, Math.min(MAX_FONT_SIZE, currentFontSize));
            }
            applyFontSize();
        }

        function applyFontSize() {
            document.documentElement.style.setProperty('--ayah-font-size', currentFontSize + 'px');
            document.getElementById('fontDisplay').textContent = `ÿ≠ÿ¨ŸÖ ÿßŸÑÿÆÿ∑: ${currentFontSize}`;
        }

        function saveFontSize() {
            localStorage.setItem(STORAGE_KEYS.FONT_SIZE, currentFontSize.toString());
        }

        function increaseFontSize() {
            if (currentFontSize < MAX_FONT_SIZE) {
                currentFontSize += 2;
                applyFontSize();
                saveFontSize();
                if (navigator.vibrate) navigator.vibrate(10);
            }
        }

        function decreaseFontSize() {
            if (currentFontSize > MIN_FONT_SIZE) {
                currentFontSize -= 2;
                applyFontSize();
                saveFontSize();
                if (navigator.vibrate) navigator.vibrate(10);
            }
        }

        // ==================== Bookmark Management ====================
        function getBookmarks() {
            try {
                const data = localStorage.getItem(STORAGE_KEYS.BOOKMARKS);
                return data ? JSON.parse(data) : {};
            } catch (e) {
                console.error('Error loading bookmarks:', e);
                return {};
            }
        }

        function saveBookmarks(bookmarks) {
            try {
                localStorage.setItem(STORAGE_KEYS.BOOKMARKS, JSON.stringify(bookmarks));
            } catch (e) {
                console.error('Error saving bookmarks:', e);
            }
        }

        function getBookmarkKey(surahId) {
            return `surah_${surahId}`;
        }

        function saveBookmarkManual() {
            if (!currentSurah) return;

            const container = document.getElementById('ayahContainer');
            if (!container) return;

            // Find the first visible ayah
            const containerRect = container.getBoundingClientRect();
            const ayahs = container.querySelectorAll('.ayah');
            let firstVisibleAyah = null;
            let firstVisibleAyahNumber = 1;

            for (const ayah of ayahs) {
                const rect = ayah.getBoundingClientRect();
                // Check if at least 50% of the ayah is visible
                const visibleHeight = Math.min(rect.bottom, containerRect.bottom) - Math.max(rect.top, containerRect.top);
                const ayahHeight = rect.bottom - rect.top;

                if (visibleHeight >= ayahHeight * 0.5) {
                    firstVisibleAyah = ayah;
                    const ayahNumberEl = ayah.querySelector('.ayah-number');
                    if (ayahNumberEl) {
                        firstVisibleAyahNumber = parseInt(ayahNumberEl.textContent, 10);
                    }
                    break;
                }
            }

            // Get scroll position as percentage
            const scrollPercentage = (container.scrollTop / (container.scrollHeight - container.clientHeight)) * 100;

            const bookmarkData = {
                surahId: currentSurah.id,
                surahName: currentSurah.nameArabic,
                ayahNumber: firstVisibleAyahNumber,
                scrollPosition: container.scrollTop,
                scrollPercentage: Math.min(100, Math.max(0, scrollPercentage)),
                timestamp: Date.now()
            };

            const bookmarks = getBookmarks();
            bookmarks[getBookmarkKey(currentSurah.id)] = bookmarkData;
            saveBookmarks(bookmarks);

            // Show visual feedback
            const indicator = document.getElementById('bookmarkIndicator');
            indicator.classList.add('saved');
            setTimeout(() => indicator.classList.remove('saved'), 500);

            if (navigator.vibrate) navigator.vibrate([20, 50, 20]);

            // Show toast notification
            showToast(`ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ¢Ÿäÿ© ${firstVisibleAyahNumber} ŸÖŸÜ ÿ≥Ÿàÿ±ÿ© ${currentSurah.nameArabic}`);
        }

        // Alias for click handler
        function saveBookmark() {
            saveBookmarkManual();
        }

        function loadBookmark(surahId) {
            const bookmarks = getBookmarks();
            const bookmarkKey = getBookmarkKey(surahId);
            const bookmark = bookmarks[bookmarkKey];

            if (!bookmark) return null;

            return bookmark;
        }

        function restoreBookmark() {
            if (!currentSurah) return;

            const bookmark = loadBookmark(currentSurah.id);
            if (!bookmark) {
                // No bookmark, scroll to top
                const container = document.getElementById('ayahContainer');
                if (container) {
                    container.scrollTop = 0;
                }
                hideBookmarkIndicator();
                return;
            }

            // Show bookmark indicator
            showBookmarkIndicator();

            const container = document.getElementById('ayahContainer');
            if (container && bookmark.scrollPosition) {
                // Wait for content to render, then scroll
                setTimeout(() => {
                    container.scrollTop = bookmark.scrollPosition;
                    showToast(`ÿ¢ÿÆÿ± ŸÇÿ±ÿßÿ°ÿ©: ÿßŸÑÿ¢Ÿäÿ© ${bookmark.ayahNumber} ŸÖŸÜ ÿ≥Ÿàÿ±ÿ© ${currentSurah.nameArabic}`);
                }, 100);
            }
        }

        function showBookmarkIndicator() {
            const indicator = document.getElementById('bookmarkIndicator');
            if (indicator) {
                indicator.classList.add('visible');
            }
        }

        function hideBookmarkIndicator() {
            const indicator = document.getElementById('bookmarkIndicator');
            if (indicator) {
                indicator.classList.remove('visible');
            }
        }

        function hasBookmark(surahId) {
            const bookmarks = getBookmarks();
            return !!bookmarks[getBookmarkKey(surahId)];
        }

        // ==================== Auto-save Reading Position ====================
        let autoSaveTimeout = null;
        let lastScrollPosition = 0;

        function setupAutoSaveBookmark() {
            const container = document.getElementById('ayahContainer');
            if (!container) return;

            container.addEventListener('scroll', function() {
                // Clear existing timeout
                if (autoSaveTimeout) {
                    clearTimeout(autoSaveTimeout);
                }

                // Save position after user stops scrolling for 1 second
                autoSaveTimeout = setTimeout(() => {
                    if (!currentSurah) return;

                    // Only save if position has changed significantly
                    const currentPosition = container.scrollTop;
                    if (Math.abs(currentPosition - lastScrollPosition) > 50) {
                        lastScrollPosition = currentPosition;

                        // Find current ayah
                        const ayahs = container.querySelectorAll('.ayah');
                        let currentAyahNumber = 1;

                        const containerRect = container.getBoundingClientRect();
                        for (const ayah of ayahs) {
                            const rect = ayah.getBoundingClientRect();
                            const visibleHeight = Math.min(rect.bottom, containerRect.bottom) - Math.max(rect.top, containerRect.top);
                            const ayahHeight = rect.bottom - rect.top;

                            if (visibleHeight >= ayahHeight * 0.5) {
                                const ayahNumberEl = ayah.querySelector('.ayah-number');
                                if (ayahNumberEl) {
                                    currentAyahNumber = parseInt(ayahNumberEl.textContent, 10);
                                }
                                break;
                            }
                        }

                        const scrollPercentage = (container.scrollTop / (container.scrollHeight - container.clientHeight)) * 100;

                        const bookmarkData = {
                            surahId: currentSurah.id,
                            surahName: currentSurah.nameArabic,
                            ayahNumber: currentAyahNumber,
                            scrollPosition: container.scrollTop,
                            scrollPercentage: Math.min(100, Math.max(0, scrollPercentage)),
                            timestamp: Date.now()
                        };

                        const bookmarks = getBookmarks();
                        bookmarks[getBookmarkKey(currentSurah.id)] = bookmarkData;
                        saveBookmarks(bookmarks);

                        // Show/hide bookmark indicator based on whether we have a bookmark
                        if (hasBookmark(currentSurah.id)) {
                            showBookmarkIndicator();
                        }
                    }
                }, 1000);
            });
        }

        // ==================== Toast Notification ====================
        function showToast(message) {
            // Remove existing toast if any
            const existingToast = document.querySelector('.toast-notification');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.className = 'toast-notification';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                bottom: 140px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(145deg, var(--primary-green) 0%, var(--secondary-green) 100%);
                color: var(--gold);
                padding: 12px 24px;
                border-radius: 25px;
                font-family: 'Cairo', sans-serif;
                font-size: 13px;
                font-weight: 600;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                z-index: 1000;
                opacity: 0;
                transition: opacity 0.3s ease;
            `;

            document.body.appendChild(toast);

            // Animate in
            setTimeout(() => {
                toast.style.opacity = '1';
            }, 10);

            // Remove after 3 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ==================== Update Surah List with Bookmark Badges ====================
        function updateSurahListBadges() {
            const surahList = document.getElementById('surahList');
            if (!surahList) return;

            const surahItems = surahList.querySelectorAll('.surah-item');
            surahItems.forEach((item, index) => {
                const surahId = surahsList[index].id;
                const bookmark = loadBookmark(surahId);

                // Remove existing badge
                const existingBadge = item.querySelector('.last-read-badge');
                if (existingBadge) {
                    existingBadge.remove();
                }

                // Add badge if bookmark exists
                if (bookmark) {
                    const badge = document.createElement('span');
                    badge.className = 'last-read-badge';
                    badge.innerHTML = `<span class="icon">üîñ</span> ÿßŸÑÿ¢Ÿäÿ© ${bookmark.ayahNumber}`;

                    const surahInfo = item.querySelector('.surah-name');
                    if (surahInfo) {
                        surahInfo.appendChild(badge);
                    }
                }
            });
        }

        // Complete Surah List from quran.com API
        const surahsList = [
            {id: 1, name: "ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©", englishName: "Al-Fatihah", nameArabic: "ÿßŸÑŸÅÿßÿ™ÿ≠ÿ©", revelationPlace: "makkah", versesCount: 7, bismillahPre: false},
            {id: 2, name: "ÿßŸÑÿ®ŸÇÿ±ÿ©", englishName: "Al-Baqarah", nameArabic: "ÿßŸÑÿ®ŸÇÿ±ÿ©", revelationPlace: "madinah", versesCount: 286, bismillahPre: true},
            {id: 3, name: "ÿ¢ŸÑ ÿπŸÖÿ±ÿßŸÜ", englishName: "Ali 'Imran", nameArabic: "ÿ¢ŸÑ ÿπŸÖÿ±ÿßŸÜ", revelationPlace: "madinah", versesCount: 200, bismillahPre: true},
            {id: 4, name: "ÿßŸÑŸÜÿ≥ÿßÿ°", englishName: "An-Nisa", nameArabic: "ÿßŸÑŸÜÿ≥ÿßÿ°", revelationPlace: "madinah", versesCount: 176, bismillahPre: true},
            {id: 5, name: "ÿßŸÑŸÖÿßÿ¶ÿØÿ©", englishName: "Al-Ma'idah", nameArabic: "ÿßŸÑŸÖÿßÿ¶ÿØÿ©", revelationPlace: "madinah", versesCount: 120, bismillahPre: true},
            {id: 6, name: "ÿßŸÑÿ£ŸÜÿπÿßŸÖ", englishName: "Al-An'am", nameArabic: "ÿßŸÑÿ£ŸÜÿπÿßŸÖ", revelationPlace: "makkah", versesCount: 165, bismillahPre: true},
            {id: 7, name: "ÿßŸÑÿ£ÿπÿ±ÿßŸÅ", englishName: "Al-A'raf", nameArabic: "ÿßŸÑÿ£ÿπÿ±ÿßŸÅ", revelationPlace: "makkah", versesCount: 206, bismillahPre: true},
            {id: 8, name: "ÿßŸÑÿ£ŸÜŸÅÿßŸÑ", englishName: "Al-Anfal", nameArabic: "ÿßŸÑÿ£ŸÜŸÅÿßŸÑ", revelationPlace: "madinah", versesCount: 75, bismillahPre: true},
            {id: 9, name: "ÿßŸÑÿ™Ÿàÿ®ÿ©", englishName: "At-Tawbah", nameArabic: "ÿßŸÑÿ™Ÿàÿ®ÿ©", revelationPlace: "madinah", versesCount: 129, bismillahPre: false},
            {id: 10, name: "ŸäŸàŸÜÿ≥", englishName: "Yunus", nameArabic: "ŸäŸàŸÜÿ≥", revelationPlace: "makkah", versesCount: 109, bismillahPre: true},
            {id: 11, name: "ŸáŸàÿØ", englishName: "Hud", nameArabic: "ŸáŸàÿØ", revelationPlace: "makkah", versesCount: 123, bismillahPre: true},
            {id: 12, name: "ŸäŸàÿ≥ŸÅ", englishName: "Yusuf", nameArabic: "ŸäŸàÿ≥ŸÅ", revelationPlace: "makkah", versesCount: 111, bismillahPre: true},
            {id: 13, name: "ÿßŸÑÿ±ÿπÿØ", englishName: "Ar-Ra'd", nameArabic: "ÿßŸÑÿ±ÿπÿØ", revelationPlace: "madinah", versesCount: 43, bismillahPre: true},
            {id: 14, name: "ÿ•ÿ®ÿ±ÿßŸáŸäŸÖ", englishName: "Ibrahim", nameArabic: "ÿßÿ®ÿ±ÿßŸáŸäŸÖ", revelationPlace: "makkah", versesCount: 52, bismillahPre: true},
            {id: 15, name: "ÿßŸÑÿ≠ÿ¨ÿ±", englishName: "Al-Hijr", nameArabic: "ÿßŸÑÿ≠ÿ¨ÿ±", revelationPlace: "makkah", versesCount: 99, bismillahPre: true},
            {id: 16, name: "ÿßŸÑŸÜÿ≠ŸÑ", englishName: "An-Nahl", nameArabic: "ÿßŸÑŸÜÿ≠ŸÑ", revelationPlace: "makkah", versesCount: 128, bismillahPre: true},
            {id: 17, name: "ÿßŸÑÿ•ÿ≥ÿ±ÿßÿ°", englishName: "Al-Isra", nameArabic: "ÿßŸÑÿ•ÿ≥ÿ±ÿßÿ°", revelationPlace: "makkah", versesCount: 111, bismillahPre: true},
            {id: 18, name: "ÿßŸÑŸÉŸáŸÅ", englishName: "Al-Kahf", nameArabic: "ÿßŸÑŸÉŸáŸÅ", revelationPlace: "makkah", versesCount: 110, bismillahPre: true},
            {id: 19, name: "ŸÖÿ±ŸäŸÖ", englishName: "Maryam", nameArabic: "ŸÖÿ±ŸäŸÖ", revelationPlace: "makkah", versesCount: 98, bismillahPre: true},
            {id: 20, name: "ÿ∑Ÿá", englishName: "Taha", nameArabic: "ÿ∑Ÿá", revelationPlace: "makkah", versesCount: 135, bismillahPre: true},
            {id: 21, name: "ÿßŸÑÿ£ŸÜÿ®Ÿäÿßÿ°", englishName: "Al-Anbya", nameArabic: "ÿßŸÑÿ£ŸÜÿ®Ÿäÿßÿ°", revelationPlace: "makkah", versesCount: 112, bismillahPre: true},
            {id: 22, name: "ÿßŸÑÿ≠ÿ¨", englishName: "Al-Hajj", nameArabic: "ÿßŸÑÿ≠ÿ¨", revelationPlace: "madinah", versesCount: 78, bismillahPre: true},
            {id: 23, name: "ÿßŸÑŸÖÿ§ŸÖŸÜŸàŸÜ", englishName: "Al-Mu'minun", nameArabic: "ÿßŸÑŸÖÿ§ŸÖŸÜŸàŸÜ", revelationPlace: "makkah", versesCount: 118, bismillahPre: true},
            {id: 24, name: "ÿßŸÑŸÜŸàÿ±", englishName: "An-Nur", nameArabic: "ÿßŸÑŸÜŸàÿ±", revelationPlace: "madinah", versesCount: 64, bismillahPre: true},
            {id: 25, name: "ÿßŸÑŸÅÿ±ŸÇÿßŸÜ", englishName: "Al-Furqan", nameArabic: "ÿßŸÑŸÅÿ±ŸÇÿßŸÜ", revelationPlace: "makkah", versesCount: 77, bismillahPre: true},
            {id: 26, name: "ÿßŸÑÿ¥ÿπÿ±ÿßÿ°", englishName: "Ash-Shu'ara", nameArabic: "ÿßŸÑÿ¥ÿπÿ±ÿßÿ°", revelationPlace: "makkah", versesCount: 227, bismillahPre: true},
            {id: 27, name: "ÿßŸÑŸÜŸÖŸÑ", englishName: "An-Naml", nameArabic: "ÿßŸÑŸÜŸÖŸÑ", revelationPlace: "makkah", versesCount: 93, bismillahPre: true},
            {id: 28, name: "ÿßŸÑŸÇÿµÿµ", englishName: "Al-Qasas", nameArabic: "ÿßŸÑŸÇÿµÿµ", revelationPlace: "makkah", versesCount: 88, bismillahPre: true},
            {id: 29, name: "ÿßŸÑÿπŸÜŸÉÿ®Ÿàÿ™", englishName: "Al-'Ankabut", nameArabic: "ÿßŸÑÿπŸÜŸÉÿ®Ÿàÿ™", revelationPlace: "makkah", versesCount: 69, bismillahPre: true},
            {id: 30, name: "ÿßŸÑÿ±ŸàŸÖ", englishName: "Ar-Rum", nameArabic: "ÿßŸÑÿ±ŸàŸÖ", revelationPlace: "makkah", versesCount: 60, bismillahPre: true},
            {id: 31, name: "ŸÑŸÇŸÖÿßŸÜ", englishName: "Luqman", nameArabic: "ŸÑŸÇŸÖÿßŸÜ", revelationPlace: "makkah", versesCount: 34, bismillahPre: true},
            {id: 32, name: "ÿßŸÑÿ≥ÿ¨ÿØÿ©", englishName: "As-Sajdah", nameArabic: "ÿßŸÑÿ≥ÿ¨ÿØÿ©", revelationPlace: "makkah", versesCount: 30, bismillahPre: true},
            {id: 33, name: "ÿßŸÑÿ£ÿ≠ÿ≤ÿßÿ®", englishName: "Al-Ahzab", nameArabic: "ÿßŸÑÿ£ÿ≠ÿ≤ÿßÿ®", revelationPlace: "madinah", versesCount: 73, bismillahPre: true},
            {id: 34, name: "ÿ≥ÿ®ÿ£", englishName: "Saba", nameArabic: "ÿ≥ÿ®ÿ•", revelationPlace: "makkah", versesCount: 54, bismillahPre: true},
            {id: 35, name: "ŸÅÿßÿ∑ÿ±", englishName: "Fatir", nameArabic: "ŸÅÿßÿ∑ÿ±", revelationPlace: "makkah", versesCount: 45, bismillahPre: true},
            {id: 36, name: "Ÿäÿ≥", englishName: "Ya-Sin", nameArabic: "Ÿäÿ≥", revelationPlace: "makkah", versesCount: 83, bismillahPre: true},
            {id: 37, name: "ÿßŸÑÿµÿßŸÅÿßÿ™", englishName: "As-Saffat", nameArabic: "ÿßŸÑÿµÿßŸÅÿßÿ™", revelationPlace: "makkah", versesCount: 182, bismillahPre: true},
            {id: 38, name: "ÿµ", englishName: "Sad", nameArabic: "ÿµ", revelationPlace: "makkah", versesCount: 88, bismillahPre: true},
            {id: 39, name: "ÿßŸÑÿ≤ŸÖÿ±", englishName: "Az-Zumar", nameArabic: "ÿßŸÑÿ≤ŸÖÿ±", revelationPlace: "makkah", versesCount: 75, bismillahPre: true},
            {id: 40, name: "ÿ∫ÿßŸÅÿ±", englishName: "Ghafir", nameArabic: "ÿ∫ÿßŸÅÿ±", revelationPlace: "makkah", versesCount: 85, bismillahPre: true},
            {id: 41, name: "ŸÅÿµŸÑÿ™", englishName: "Fussilat", nameArabic: "ŸÅÿµŸÑÿ™", revelationPlace: "makkah", versesCount: 54, bismillahPre: true},
            {id: 42, name: "ÿßŸÑÿ¥Ÿàÿ±Ÿâ", englishName: "Ash-Shuraa", nameArabic: "ÿßŸÑÿ¥Ÿàÿ±Ÿâ", revelationPlace: "makkah", versesCount: 53, bismillahPre: true},
            {id: 43, name: "ÿßŸÑÿ≤ÿÆÿ±ŸÅ", englishName: "Az-Zukhruf", nameArabic: "ÿßŸÑÿ≤ÿÆÿ±ŸÅ", revelationPlace: "makkah", versesCount: 89, bismillahPre: true},
            {id: 44, name: "ÿßŸÑÿØÿÆÿßŸÜ", englishName: "Ad-Dukhan", nameArabic: "ÿßŸÑÿØÿÆÿßŸÜ", revelationPlace: "makkah", versesCount: 59, bismillahPre: true},
            {id: 45, name: "ÿßŸÑÿ¨ÿßÿ´Ÿäÿ©", englishName: "Al-Jathiyah", nameArabic: "ÿßŸÑÿ¨ÿßÿ´Ÿäÿ©", revelationPlace: "makkah", versesCount: 37, bismillahPre: true},
            {id: 46, name: "ÿßŸÑÿ£ÿ≠ŸÇÿßŸÅ", englishName: "Al-Ahqaf", nameArabic: "ÿßŸÑÿ£ÿ≠ŸÇÿßŸÅ", revelationPlace: "makkah", versesCount: 35, bismillahPre: true},
            {id: 47, name: "ŸÖÿ≠ŸÖÿØ", englishName: "Muhammad", nameArabic: "ŸÖÿ≠ŸÖÿØ", revelationPlace: "madinah", versesCount: 38, bismillahPre: true},
            {id: 48, name: "ÿßŸÑŸÅÿ™ÿ≠", englishName: "Al-Fath", nameArabic: "ÿßŸÑŸÅÿ™ÿ≠", revelationPlace: "madinah", versesCount: 29, bismillahPre: true},
            {id: 49, name: "ÿßŸÑÿ≠ÿ¨ÿ±ÿßÿ™", englishName: "Al-Hujurat", nameArabic: "ÿßŸÑÿ≠ÿ¨ÿ±ÿßÿ™", revelationPlace: "madinah", versesCount: 18, bismillahPre: true},
            {id: 50, name: "ŸÇ", englishName: "Qaf", nameArabic: "ŸÇ", revelationPlace: "makkah", versesCount: 45, bismillahPre: true},
            {id: 51, name: "ÿßŸÑÿ∞ÿßÿ±Ÿäÿßÿ™", englishName: "Adh-Dhariyat", nameArabic: "ÿßŸÑÿ∞ÿßÿ±Ÿäÿßÿ™", revelationPlace: "makkah", versesCount: 60, bismillahPre: true},
            {id: 52, name: "ÿßŸÑÿ∑Ÿàÿ±", englishName: "At-Tur", nameArabic: "ÿßŸÑÿ∑Ÿàÿ±", revelationPlace: "makkah", versesCount: 49, bismillahPre: true},
            {id: 53, name: "ÿßŸÑŸÜÿ¨ŸÖ", englishName: "An-Najm", nameArabic: "ÿßŸÑŸÜÿ¨ŸÖ", revelationPlace: "makkah", versesCount: 62, bismillahPre: true},
            {id: 54, name: "ÿßŸÑŸÇŸÖÿ±", englishName: "Al-Qamar", nameArabic: "ÿßŸÑŸÇŸÖÿ±", revelationPlace: "makkah", versesCount: 55, bismillahPre: true},
            {id: 55, name: "ÿßŸÑÿ±ÿ≠ŸÖŸÜ", englishName: "Ar-Rahman", nameArabic: "ÿßŸÑÿ±ÿ≠ŸÖŸÜ", revelationPlace: "madinah", versesCount: 78, bismillahPre: true},
            {id: 56, name: "ÿßŸÑŸàÿßŸÇÿπÿ©", englishName: "Al-Waqi'ah", nameArabic: "ÿßŸÑŸàÿßŸÇÿπÿ©", revelationPlace: "makkah", versesCount: 96, bismillahPre: true},
            {id: 57, name: "ÿßŸÑÿ≠ÿØŸäÿØ", englishName: "Al-Hadid", nameArabic: "ÿßŸÑÿ≠ÿØŸäÿØ", revelationPlace: "madinah", versesCount: 29, bismillahPre: true},
            {id: 58, name: "ÿßŸÑŸÖÿ¨ÿßÿØŸÑÿ©", englishName: "Al-Mujadila", nameArabic: "ÿßŸÑŸÖÿ¨ÿßÿØŸÑÿ©", revelationPlace: "madinah", versesCount: 22, bismillahPre: true},
            {id: 59, name: "ÿßŸÑÿ≠ÿ¥ÿ±", englishName: "Al-Hashr", nameArabic: "ÿßŸÑÿ≠ÿ¥ÿ±", revelationPlace: "madinah", versesCount: 24, bismillahPre: true},
            {id: 60, name: "ÿßŸÑŸÖŸÖÿ™ÿ≠ŸÜÿ©", englishName: "Al-Mumtahanah", nameArabic: "ÿßŸÑŸÖŸÖÿ™ÿ≠ŸÜÿ©", revelationPlace: "madinah", versesCount: 13, bismillahPre: true},
            {id: 61, name: "ÿßŸÑÿµŸÅ", englishName: "As-Saf", nameArabic: "ÿßŸÑÿµŸÅ", revelationPlace: "madinah", versesCount: 14, bismillahPre: true},
            {id: 62, name: "ÿßŸÑÿ¨ŸÖÿπÿ©", englishName: "Al-Jumu'ah", nameArabic: "ÿßŸÑÿ¨ŸÖÿπÿ©", revelationPlace: "madinah", versesCount: 11, bismillahPre: true},
            {id: 63, name: "ÿßŸÑŸÖŸÜÿßŸÅŸÇŸàŸÜ", englishName: "Al-Munafiqun", nameArabic: "ÿßŸÑŸÖŸÜÿßŸÅŸÇŸàŸÜ", revelationPlace: "madinah", versesCount: 11, bismillahPre: true},
            {id: 64, name: "ÿßŸÑÿ™ÿ∫ÿßÿ®ŸÜ", englishName: "At-Taghabun", nameArabic: "ÿßŸÑÿ™ÿ∫ÿßÿ®ŸÜ", revelationPlace: "madinah", versesCount: 18, bismillahPre: true},
            {id: 65, name: "ÿßŸÑÿ∑ŸÑÿßŸÇ", englishName: "At-Talaq", nameArabic: "ÿßŸÑÿ∑ŸÑÿßŸÇ", revelationPlace: "madinah", versesCount: 12, bismillahPre: true},
            {id: 66, name: "ÿßŸÑÿ™ÿ≠ÿ±ŸäŸÖ", englishName: "At-Tahrim", nameArabic: "ÿßŸÑÿ™ÿ≠ÿ±ŸäŸÖ", revelationPlace: "madinah", versesCount: 12, bismillahPre: true},
            {id: 67, name: "ÿßŸÑŸÖŸÑŸÉ", englishName: "Al-Mulk", nameArabic: "ÿßŸÑŸÖŸÑŸÉ", revelationPlace: "makkah", versesCount: 30, bismillahPre: true},
            {id: 68, name: "ÿßŸÑŸÇŸÑŸÖ", englishName: "Al-Qalam", nameArabic: "ÿßŸÑŸÇŸÑŸÖ", revelationPlace: "makkah", versesCount: 52, bismillahPre: true},
            {id: 69, name: "ÿßŸÑÿ≠ÿßŸÇÿ©", englishName: "Al-Haqqah", nameArabic: "ÿßŸÑÿ≠ÿßŸÇÿ©", revelationPlace: "makkah", versesCount: 52, bismillahPre: true},
            {id: 70, name: "ÿßŸÑŸÖÿπÿßÿ±ÿ¨", englishName: "Al-Ma'arij", nameArabic: "ÿßŸÑŸÖÿπÿßÿ±ÿ¨", revelationPlace: "makkah", versesCount: 44, bismillahPre: true},
            {id: 71, name: "ŸÜŸàÿ≠", englishName: "Nuh", nameArabic: "ŸÜŸàÿ≠", revelationPlace: "makkah", versesCount: 28, bismillahPre: true},
            {id: 72, name: "ÿßŸÑÿ¨ŸÜ", englishName: "Al-Jinn", nameArabic: "ÿßŸÑÿ¨ŸÜ", revelationPlace: "makkah", versesCount: 28, bismillahPre: true},
            {id: 73, name: "ÿßŸÑŸÖÿ≤ŸÖŸÑ", englishName: "Al-Muzzammil", nameArabic: "ÿßŸÑŸÖÿ≤ŸÖŸÑ", revelationPlace: "makkah", versesCount: 20, bismillahPre: true},
            {id: 74, name: "ÿßŸÑŸÖÿØÿ´ÿ±", englishName: "Al-Muddaththir", nameArabic: "ÿßŸÑŸÖÿØÿ´ÿ±", revelationPlace: "makkah", versesCount: 56, bismillahPre: true},
            {id: 75, name: "ÿßŸÑŸÇŸäÿßŸÖÿ©", englishName: "Al-Qiyamah", nameArabic: "ÿßŸÑŸÇŸäÿßŸÖÿ©", revelationPlace: "makkah", versesCount: 40, bismillahPre: true},
            {id: 76, name: "ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜ", englishName: "Al-Insan", nameArabic: "ÿßŸÑÿßŸÜÿ≥ÿßŸÜ", revelationPlace: "madinah", versesCount: 31, bismillahPre: true},
            {id: 77, name: "ÿßŸÑŸÖÿ±ÿ≥ŸÑÿßÿ™", englishName: "Al-Mursalat", nameArabic: "ÿßŸÑŸÖÿ±ÿ≥ŸÑÿßÿ™", revelationPlace: "makkah", versesCount: 50, bismillahPre: true},
            {id: 78, name: "ÿßŸÑŸÜÿ®ÿ£", englishName: "An-Naba", nameArabic: "ÿßŸÑŸÜÿ®ÿ•", revelationPlace: "makkah", versesCount: 40, bismillahPre: true},
            {id: 79, name: "ÿßŸÑŸÜÿßÿ≤ÿπÿßÿ™", englishName: "An-Nazi'at", nameArabic: "ÿßŸÑŸÜÿßÿ≤ÿπÿßÿ™", revelationPlace: "makkah", versesCount: 46, bismillahPre: true},
            {id: 80, name: "ÿπÿ®ÿ≥", englishName: "'Abasa", nameArabic: "ÿπÿ®ÿ≥", revelationPlace: "makkah", versesCount: 42, bismillahPre: true},
            {id: 81, name: "ÿßŸÑÿ™ŸÉŸàŸäÿ±", englishName: "At-Takwir", nameArabic: "ÿßŸÑÿ™ŸÉŸàŸäÿ±", revelationPlace: "makkah", versesCount: 29, bismillahPre: true},
            {id: 82, name: "ÿßŸÑÿßŸÜŸÅÿ∑ÿßÿ±", englishName: "Al-Infitar", nameArabic: "ÿßŸÑÿ•ŸÜŸÅÿ∑ÿßÿ±", revelationPlace: "makkah", versesCount: 19, bismillahPre: true},
            {id: 83, name: "ÿßŸÑŸÖÿ∑ŸÅŸÅŸäŸÜ", englishName: "Al-Mutaffifin", nameArabic: "ÿßŸÑŸÖÿ∑ŸÅŸÅŸäŸÜ", revelationPlace: "makkah", versesCount: 36, bismillahPre: true},
            {id: 84, name: "ÿßŸÑÿßŸÜÿ¥ŸÇÿßŸÇ", englishName: "Al-Inshiqaq", nameArabic: "ÿßŸÑÿ•ŸÜÿ¥ŸÇÿßŸÇ", revelationPlace: "makkah", versesCount: 25, bismillahPre: true},
            {id: 85, name: "ÿßŸÑÿ®ÿ±Ÿàÿ¨", englishName: "Al-Buruj", nameArabic: "ÿßŸÑÿ®ÿ±Ÿàÿ¨", revelationPlace: "makkah", versesCount: 22, bismillahPre: true},
            {id: 86, name: "ÿßŸÑÿ∑ÿßÿ±ŸÇ", englishName: "At-Tariq", nameArabic: "ÿßŸÑÿ∑ÿßÿ±ŸÇ", revelationPlace: "makkah", versesCount: 17, bismillahPre: true},
            {id: 87, name: "ÿßŸÑÿ£ÿπŸÑŸâ", englishName: "Al-A'la", nameArabic: "ÿßŸÑÿ£ÿπŸÑŸâ", revelationPlace: "makkah", versesCount: 19, bismillahPre: true},
            {id: 88, name: "ÿßŸÑÿ∫ÿßÿ¥Ÿäÿ©", englishName: "Al-Ghashiyah", nameArabic: "ÿßŸÑÿ∫ÿßÿ¥Ÿäÿ©", revelationPlace: "makkah", versesCount: 26, bismillahPre: true},
            {id: 89, name: "ÿßŸÑŸÅÿ¨ÿ±", englishName: "Al-Fajr", nameArabic: "ÿßŸÑŸÅÿ¨ÿ±", revelationPlace: "makkah", versesCount: 30, bismillahPre: true},
            {id: 90, name: "ÿßŸÑÿ®ŸÑÿØ", englishName: "Al-Balad", nameArabic: "ÿßŸÑÿ®ŸÑÿØ", revelationPlace: "makkah", versesCount: 20, bismillahPre: true},
            {id: 91, name: "ÿßŸÑÿ¥ŸÖÿ≥", englishName: "Ash-Shams", nameArabic: "ÿßŸÑÿ¥ŸÖÿ≥", revelationPlace: "makkah", versesCount: 15, bismillahPre: true},
            {id: 92, name: "ÿßŸÑŸÑŸäŸÑ", englishName: "Al-Layl", nameArabic: "ÿßŸÑŸÑŸäŸÑ", revelationPlace: "makkah", versesCount: 21, bismillahPre: true},
            {id: 93, name: "ÿßŸÑÿ∂ÿ≠Ÿâ", englishName: "Ad-Duhaa", nameArabic: "ÿßŸÑÿ∂ÿ≠Ÿâ", revelationPlace: "makkah", versesCount: 11, bismillahPre: true},
            {id: 94, name: "ÿßŸÑÿ¥ÿ±ÿ≠", englishName: "Ash-Sharh", nameArabic: "ÿßŸÑÿ¥ÿ±ÿ≠", revelationPlace: "makkah", versesCount: 8, bismillahPre: true},
            {id: 95, name: "ÿßŸÑÿ™ŸäŸÜ", englishName: "At-Tin", nameArabic: "ÿßŸÑÿ™ŸäŸÜ", revelationPlace: "makkah", versesCount: 8, bismillahPre: true},
            {id: 96, name: "ÿßŸÑÿπŸÑŸÇ", englishName: "Al-'Alaq", nameArabic: "ÿßŸÑÿπŸÑŸÇ", revelationPlace: "makkah", versesCount: 19, bismillahPre: true},
            {id: 97, name: "ÿßŸÑŸÇÿØÿ±", englishName: "Al-Qadr", nameArabic: "ÿßŸÑŸÇÿØÿ±", revelationPlace: "makkah", versesCount: 5, bismillahPre: true},
            {id: 98, name: "ÿßŸÑÿ®ŸäŸÜÿ©", englishName: "Al-Bayyinah", nameArabic: "ÿßŸÑÿ®ŸäŸÜÿ©", revelationPlace: "madinah", versesCount: 8, bismillahPre: true},
            {id: 99, name: "ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©", englishName: "Az-Zalzalah", nameArabic: "ÿßŸÑÿ≤ŸÑÿ≤ŸÑÿ©", revelationPlace: "madinah", versesCount: 8, bismillahPre: true},
            {id: 100, name: "ÿßŸÑÿπÿßÿØŸäÿßÿ™", englishName: "Al-'Adiyat", nameArabic: "ÿßŸÑÿπÿßÿØŸäÿßÿ™", revelationPlace: "makkah", versesCount: 11, bismillahPre: true},
            {id: 101, name: "ÿßŸÑŸÇÿßÿ±ÿπÿ©", englishName: "Al-Qari'ah", nameArabic: "ÿßŸÑŸÇÿßÿ±ÿπÿ©", revelationPlace: "makkah", versesCount: 11, bismillahPre: true},
            {id: 102, name: "ÿßŸÑÿ™ŸÉÿßÿ´ÿ±", englishName: "At-Takathur", nameArabic: "ÿßŸÑÿ™ŸÉÿßÿ´ÿ±", revelationPlace: "makkah", versesCount: 8, bismillahPre: true},
            {id: 103, name: "ÿßŸÑÿπÿµÿ±", englishName: "Al-'Asr", nameArabic: "ÿßŸÑÿπÿµÿ±", revelationPlace: "makkah", versesCount: 3, bismillahPre: true},
            {id: 104, name: "ÿßŸÑŸáŸÖÿ≤ÿ©", englishName: "Al-Humazah", nameArabic: "ÿßŸÑŸáŸÖÿ≤ÿ©", revelationPlace: "makkah", versesCount: 9, bismillahPre: true},
            {id: 105, name: "ÿßŸÑŸÅŸäŸÑ", englishName: "Al-Fil", nameArabic: "ÿßŸÑŸÅŸäŸÑ", revelationPlace: "makkah", versesCount: 5, bismillahPre: true},
            {id: 106, name: "ŸÇÿ±Ÿäÿ¥", englishName: "Quraysh", nameArabic: "ŸÇÿ±Ÿäÿ¥", revelationPlace: "makkah", versesCount: 4, bismillahPre: true},
            {id: 107, name: "ÿßŸÑŸÖÿßÿπŸàŸÜ", englishName: "Al-Ma'un", nameArabic: "ÿßŸÑŸÖÿßÿπŸàŸÜ", revelationPlace: "makkah", versesCount: 7, bismillahPre: true},
            {id: 108, name: "ÿßŸÑŸÉŸàÿ´ÿ±", englishName: "Al-Kawthar", nameArabic: "ÿßŸÑŸÉŸàÿ´ÿ±", revelationPlace: "makkah", versesCount: 3, bismillahPre: true},
            {id: 109, name: "ÿßŸÑŸÉÿßŸÅÿ±ŸàŸÜ", englishName: "Al-Kafirun", nameArabic: "ÿßŸÑŸÉÿßŸÅÿ±ŸàŸÜ", revelationPlace: "makkah", versesCount: 6, bismillahPre: true},
            {id: 110, name: "ÿßŸÑŸÜÿµÿ±", englishName: "An-Nasr", nameArabic: "ÿßŸÑŸÜÿµÿ±", revelationPlace: "madinah", versesCount: 3, bismillahPre: true},
            {id: 111, name: "ÿßŸÑŸÖÿ≥ÿØ", englishName: "Al-Masad", nameArabic: "ÿßŸÑŸÖÿ≥ÿØ", revelationPlace: "makkah", versesCount: 5, bismillahPre: true},
            {id: 112, name: "ÿßŸÑÿ•ÿÆŸÑÿßÿµ", englishName: "Al-Ikhlas", nameArabic: "ÿßŸÑÿ•ÿÆŸÑÿßÿµ", revelationPlace: "makkah", versesCount: 4, bismillahPre: true},
            {id: 113, name: "ÿßŸÑŸÅŸÑŸÇ", englishName: "Al-Falaq", nameArabic: "ÿßŸÑŸÅŸÑŸÇ", revelationPlace: "makkah", versesCount: 5, bismillahPre: true},
            {id: 114, name: "ÿßŸÑŸÜÿßÿ≥", englishName: "An-Nas", nameArabic: "ÿßŸÑŸÜÿßÿ≥", revelationPlace: "makkah", versesCount: 6, bismillahPre: true}
        ];

        let currentSurah = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Load saved font size
            loadFontSize();
            // Render surah list
            renderSurahList(surahsList);
            // Update bookmarks badges
            updateSurahListBadges();
            // Setup scroll listener
            setupScrollListener();
        });

        function renderSurahList(list) {
            const container = document.getElementById('surahList');
            container.innerHTML = list.map(surah => `
                <div class="surah-item" onclick="openSurah(${surah.id})">
                    <div class="surah-number">${surah.id}</div>
                    <div class="surah-info">
                        <div class="surah-name">${surah.nameArabic}</div>
                        <div class="surah-details">
                            <span>${surah.revelationPlace === 'makkah' ? 'üïã ŸÖŸÉŸäÿ©' : 'üïå ŸÖÿØŸÜŸäÿ©'}</span>
                            <span>üìú ${surah.versesCount} ÿ¢Ÿäÿ©</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterSurahs() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = surahsList.filter(surah =>
                surah.nameArabic.includes(query) ||
                surah.englishName.toLowerCase().includes(query) ||
                surah.id.toString().includes(query)
            );
            renderSurahList(filtered);
        }

        async function openSurah(id) {
            currentSurah = surahsList.find(s => s.id === id);
            if (!currentSurah) return;

            document.getElementById('surahListView').classList.add('hidden');
            document.getElementById('searchSection').style.display = 'none';
            document.getElementById('readerView').classList.add('active');
            document.getElementById('bottomNav').style.display = 'none';

            document.getElementById('readerSurahName').textContent = currentSurah.nameArabic;
            document.getElementById('readerSurahInfo').textContent =
                `ÿ≥Ÿàÿ±ÿ© ${currentSurah.revelationPlace === 'makkah' ? 'ŸÖŸÉŸäÿ©' : 'ŸÖÿØŸÜŸäÿ©'} - ${currentSurah.versesCount} ÿ¢Ÿäÿ©`;

            document.getElementById('bismillah').style.display =
                currentSurah.id === 1 || currentSurah.id === 9 ? 'none' : 'block';

            // Show loading
            const container = document.getElementById('ayahContainer');
            container.innerHTML = `
                <div class="loading-spinner"></div>
                <div class="loading-text">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿ≥Ÿàÿ±ÿ© ${currentSurah.nameArabic}...</div>
            `;

            try {
                const response = await fetch(`https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=${id}`);
                const data = await response.json();

                if (data.verses && data.verses.length > 0) {
                    renderAyahs(data.verses);
                    // Setup auto-save bookmark after rendering
                    setupAutoSaveBookmark();
                    // Restore bookmark position
                    restoreBookmark();
                } else {
                    throw new Error('No verses found');
                }
            } catch (error) {
                console.error('Error loading surah:', error);
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
                        <div style="font-size: 16px; margin-bottom: 15px;">ÿπÿ∞ÿ±ÿßŸãÿå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ≥Ÿàÿ±ÿ©</div>
                        <button onclick="openSurah(${id})" style="background: linear-gradient(145deg, var(--gold) 0%, var(--gold-light) 100%); border: none; border-radius: 12px; padding: 12px 30px; font-family: 'Cairo', sans-serif; font-size: 14px; font-weight: 600; color: var(--primary-green); cursor: pointer;">ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©</button>
                    </div>
                `;
            }

            localStorage.setItem('lastReadSurah', JSON.stringify(id));
        }

        function renderAyahs(verses) {
            const container = document.getElementById('ayahContainer');
            container.innerHTML = verses.map((verse, index) => {
                const ayahNumber = verse.verse_key ? verse.verse_key.split(':')[1] : (verse.verse_number || (index + 1));
                return `
                <div class="ayah">
                    <p class="ayah-text">${verse.text_uthmani || ''}<span class="ayah-number">${ayahNumber}</span></p>
                </div>
                `;
            }).join('');
        }

        function showListView() {
            document.getElementById('surahListView').classList.remove('hidden');
            document.getElementById('searchSection').style.display = 'block';
            document.getElementById('readerView').classList.remove('active');
            document.getElementById('bottomNav').style.display = 'flex';
            // Update bookmark badges when returning to list
            updateSurahListBadges();
            // Hide bookmark indicator
            hideBookmarkIndicator();
        }

        function goBack() {
            if (document.getElementById('readerView').classList.contains('active')) {
                showListView();
            } else {
                window.location.href = 'index.html';
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function setupScrollListener() {
            const scrollBtn = document.getElementById('scrollTopBtn');
            window.addEventListener('scroll', () => {
                scrollBtn.classList.toggle('visible', window.scrollY > 300);
            });
        }

        // Haptic feedback
        document.addEventListener('touchstart', function(e) {
            if (e.target.closest('.surah-item, .nav-item, .back-button, .font-btn, .bookmark-indicator')) {
                if (navigator.vibrate) {
                    navigator.vibrate(10);
                }
            }
        }, { passive: true });

        // Prevent text selection
        document.addEventListener('selectstart', e => e.preventDefault());

        // Prevent double-tap zoom
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
